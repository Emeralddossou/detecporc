<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DETECPORC - Trouver la viande de porc la plus proche</title>
  <meta name="description" content="DETECPORC aide a trouver rapidement les points de vente de viande de porc a proximite." />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Work+Sans:wght@400;500;600&display=swap" rel="stylesheet">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="icon" type="image/jpeg" href="favicon.jpg">

  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <a class="skip-link" href="#main">Aller au contenu</a>

  <header class="site-header">
    <div class="container">
      <div class="brand">
        <div class="logo" aria-hidden="true">DP</div>
        <div>
          <div class="brand-title">DETECPORC</div>
          <div class="brand-subtitle">Trouve des points de vente de porc proches, fiables et ouverts.</div>
        </div>
      </div>

      <div class="header-actions">
        <button id="btn-get" class="btn btn-primary btn-lg">
          <i class="bi bi-compass"></i>
          Me localiser
        </button>
        <button id="btn-refresh" class="btn btn-outline-light btn-lg" title="Rafraichir la liste">
          <i class="bi bi-arrow-repeat"></i>
        </button>
      </div>
    </div>
  </header>

  <main id="main" class="container main-grid">
    <section class="panel hero-panel" aria-label="Presentation">
      <div>
        <p class="eyebrow">Localiser vite, acheter mieux</p>
        <h1>La viande de porc la plus proche, en quelques secondes.</h1>
        <p class="lead">DETECPORC compare les points de vente autour de toi, affiche les distances, le temps estime et les contacts pour commander rapidement.</p>
        <div class="hero-actions">
          <button id="btn-manual" class="btn btn-light">
            <i class="bi bi-geo-alt-fill"></i>
            Saisir mes coordonnees
          </button>
          <button id="btn-show-all" class="btn btn-outline-secondary">
            Montrer tous les points
          </button>
          <button id="btn-suggest" class="btn btn-outline-dark">
            <i class="bi bi-plus-circle"></i>
            Ajouter un nouveau point
          </button>
        </div>
      </div>
      <div class="hero-stats" aria-live="polite">
        <div class="stat-card">
          <div class="stat-label">Points disponibles</div>
          <div id="stat-total" class="stat-value">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Plus proche</div>
          <div id="stat-nearest" class="stat-value">-</div>
          <div id="stat-nearest-name" class="stat-meta">-</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Position</div>
          <div id="user-coords" class="stat-value">Inconnue</div>
          <div id="user-status" class="stat-meta">Active la localisation pour plus de precision.</div>
        </div>
      </div>
    </section>

    <section class="panel map-panel" aria-label="Carte interactive">
      <div class="panel-header">
        <div>
          <div class="eyebrow">Carte interactive</div>
          <h2>Visualise les points de vente</h2>
        </div>
        <div class="panel-status" id="map-status">Carte chargee</div>
      </div>
      <div id="map" role="application" aria-label="Carte des points de vente"></div>
      <div class="map-hint">Astuce : clique sur un marqueur ou un resultat pour zoomer.</div>
    </section>

    <aside class="panel list-panel" aria-label="Liste des points de vente">
      <div class="panel-header">
        <div>
          <div class="eyebrow">Resultats</div>
          <h2>Points de vente proches</h2>
        </div>
        <div class="panel-status">Tri par proximite</div>
      </div>

      <div class="filters">
        <label class="filter-field">
          <span>Rechercher</span>
          <input id="filter-search" type="text" placeholder="Nom, quartier, commentaire" autocomplete="off" />
        </label>
        <label class="filter-field">
          <span>Distance max (km)</span>
          <input id="filter-distance" type="number" min="0" step="0.5" placeholder="10" />
        </label>
      </div>

      <div id="results" role="list" aria-live="polite">
        <div class="text-muted small">Chargement des points de vente...</div>
      </div>
    </aside>

    <section class="panel info-panel" aria-label="Conseils">
      <div>
        <div class="eyebrow">Conseils</div>
        <h2>Achats plus rapides, plus surs</h2>
      </div>
      <div class="info-grid">
        <div class="info-card">
          <i class="bi bi-telephone" aria-hidden="true"></i>
          <div>
            <h3>Appelle avant de te deplacer</h3>
            <p>Gagne du temps en confirmant la disponibilite et les prix par telephone.</p>
          </div>
        </div>
        <div class="info-card">
          <i class="bi bi-clock" aria-hidden="true"></i>
          <div>
            <h3>Verifie les horaires</h3>
            <p>Les horaires sont mis a jour par les vendeurs via l'admin DETECPORC.</p>
          </div>
        </div>
        <div class="info-card">
          <i class="bi bi-shield-check" aria-hidden="true"></i>
          <div>
            <h3>Qualite et hygiene</h3>
            <p>Choisis les vendeurs qui affichent un commentaire sur leurs pratiques.</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <div>© DETECPORC — Trouver la viande de porc la plus proche</div>
    </div>
  </footer>

  <div id="coord-modal" class="coord-modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="coord-title">
    <div class="coord-card">
      <div class="coord-header">
        <h2 id="coord-title">Saisir mes coordonnees</h2>
        <p>Entre une latitude et une longitude valides pour calculer les distances.</p>
      </div>
      <form id="coord-form" class="coord-form">
        <div class="coord-location">
          <div class="coord-location-title">Localisation</div>
          <div class="coord-location-actions">
            <button id="coord-auto" class="btn btn-outline-secondary btn-sm" type="button">Utiliser ma position</button>
            <button id="coord-map" class="btn btn-outline-secondary btn-sm" type="button">Choisir sur la carte</button>
            <button id="coord-manual" class="btn btn-outline-secondary btn-sm" type="button">Saisir manuellement</button>
          </div>
          <div id="coord-status" class="small text-muted">Localisation automatique en cours...</div>
        </div>
        <label>
          <span>Latitude</span>
          <input id="coord-lat" type="number" step="0.00001" placeholder="ex: 6.4969" required />
        </label>
        <label>
          <span>Longitude</span>
          <input id="coord-lng" type="number" step="0.00001" placeholder="ex: 2.6036" required />
        </label>
        <div id="coord-error" class="text-danger small" role="status" aria-live="polite"></div>
        <div class="coord-actions">
          <button id="coord-cancel" class="btn btn-outline-secondary" type="button">Annuler</button>
          <button class="btn btn-primary" type="submit">Valider</button>
        </div>
      </form>
    </div>
  </div>

  <div id="suggest-modal" class="coord-modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="suggest-title">
    <div class="coord-card">
      <div class="coord-header">
        <h2 id="suggest-title">Proposer un nouveau point</h2>
        <p>Ta proposition sera verifiee par un admin avant publication.</p>
      </div>
      <form id="suggest-form" class="coord-form">
        <label>
          <span>Nom du point</span>
          <input id="suggest-name" type="text" required />
        </label>
        <label>
          <span>Adresse</span>
          <input id="suggest-address" type="text" />
        </label>
        <label>
          <span>Telephone</span>
          <input id="suggest-phone" type="text" />
        </label>
        <label>
          <span>Horaires</span>
          <input id="suggest-hours" type="text" />
        </label>
        <div class="coord-location">
          <div class="coord-location-title">Localisation</div>
          <div class="coord-location-actions">
            <button id="suggest-auto" class="btn btn-outline-secondary btn-sm" type="button">Utiliser ma position</button>
            <button id="suggest-map" class="btn btn-outline-secondary btn-sm" type="button">Choisir sur la carte</button>
            <button id="suggest-manual" class="btn btn-outline-secondary btn-sm" type="button">Saisir manuellement</button>
          </div>
          <div id="suggest-status" class="small text-muted">Localisation automatique en cours...</div>
        </div>
        <label>
          <span>Latitude</span>
          <input id="suggest-lat" type="number" step="0.00001" placeholder="ex: 6.4969" required />
        </label>
        <label>
          <span>Longitude</span>
          <input id="suggest-lng" type="number" step="0.00001" placeholder="ex: 2.6036" required />
        </label>
        <label>
          <span>Commentaire</span>
          <textarea id="suggest-comment" rows="3"></textarea>
        </label>
        <div id="suggest-error" class="text-danger small" role="status" aria-live="polite"></div>
        <div class="coord-actions">
          <button id="suggest-cancel" class="btn btn-outline-secondary" type="button">Annuler</button>
          <button class="btn btn-primary" type="submit">Envoyer</button>
        </div>
      </form>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="app.js"></script>
</body>
</html>

